@inherits Umbraco.Web.Mvc.UmbracoViewPage<BlockListItem>
@using Umbraco.Core.Models.Blocks;
@using ContentModels = Umbraco.Web.PublishedModels;
@{
    var searchQuery = Request.QueryString["q"];
}
<div class="container">
    <form action="" method="GET">
        <input type="text" placeholder="Search..." name="query">
        <button>Search</button>
    </form>
    
    
    @{
        var searchQuery = Request.QueryString["query"];
    
       @if (!string.IsNullOrWhiteSpace(searchQuery))
                    {
                        var results = Umbraco.ContentQuery.Search(searchQuery, string.Empty);
                        long resultCount = results != null && results.Any() ? results.Count() : 0;
                        <div class="searchresults">
                            <p>We found <strong>@resultCount</strong> result@(resultCount != 1 ? "s" : "") when searching for <strong>@searchQuery</strong></p>
                            @if (resultCount > 0)
                            {
                                <ul>
                                    @foreach (var result in results)
                                    {
                                        <li>
                                            <h3><a href="@result.Content.Url">@result.Content.Name</a></h3>
                                            <p>@(result.Content.Value<string>("metaDescription"))</p>
                                        </li>
                                    }
                                </ul>
                            }
                        </div>
                    }
    }
</div>