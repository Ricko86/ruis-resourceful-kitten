@inherits Umbraco.Web.Mvc.UmbracoViewPage<BlockListItem>
@using Umbraco.Core.Models.Blocks;
@using ContentModels = Umbraco.Web.PublishedModels;
@{
    var counter = 0;
    var searchQuery = Request.QueryString["q"];
    var contentTypeService = Current.Services.ContentTypeService;
    var contentService = Current.Services.ContentService;

// Get all content types
    var contentTypes = contentTypeService.GetAllContentTypeAliases();
}
<div class="container">
    <form action="" method="GET">
        <input type="text" placeholder="Search..." name="q">
        <button>Search</button>
    </form>
    
@if (!string.IsNullOrWhiteSpace(searchQuery))
{
    var results = Umbraco.ContentQuery.Search(searchQuery, string.Empty);
    
        @*
    var selection = node.Children.Where(x => x.IsVisible() @*&& x.ContentType.Alias == "contentPage"*@
    @*)
    @*.ToArray();
    *@

    
    long resultCount = results != null && results.Any() ? results.Count() : 0;
    <div class="searchresults">
        <p>We found <strong>@resultCount</strong> result@(resultCount != 1 ? "s" : "") when searching for <strong>@searchQuery</strong></p>
        @if (resultCount > 0)
        {
            <ul>
                @foreach (var result in results)
                {
                    
                    <li>
                        <h3><a href="@result.Content.Url">@result.Content.Name</a></h3>
                    </li>
                }
            </ul>
        }
    </div>
}