@inherits Umbraco.Web.Mvc.UmbracoViewPage<BlockListItem>
@using Umbraco.Core.Models.Blocks;
@using ContentModels = Umbraco.Web.PublishedModels;
@{
    var counter = 0;
    var searchQuery = Request.QueryString["q"];
}
<div class="container">
    <form action="" method="GET">
        <input type="text" placeholder="Search..." name="q">
        <button>Search</button>
    </form>
    
if(ExamineManager.Instance.TryGetIndex("ExternalIndex", out var index))
{
    var searcher = index.GetSearcher();
    var results = searcher.CreateQuery().Field("nodeName", searchTerm).Execute();

    if (results.Any())
    {
        <ul>
            @foreach (var result in results)
            {
                var node = Umbraco.Content(result.Id);
                <li>
                    <a href="@node.Url">@node.Name</a>
                    <br/>Relevance - (@result.Score)
                </li>
            }
        </ul>
    }
    else
    {
        <p>No results found for query @searchTerm</p>
    }
}

return;